╔══════════════════════════════════════════════════════════════════════════════╗
║              NVDLA PDP & PDP_RDMA CONFIGURATION REFERENCE                    ║
╚══════════════════════════════════════════════════════════════════════════════╝

SEQUENCE: Status→Pointer→RDMA_Config→PDP_Config→Enable_RDMA→Enable_PDP→Monitor

┌──────────────────────────────────────────────────────────────────────────────┐
│ 1. STATUS & CONTROL                                                          │
├────────────────────────────┬────────────┬────────────┬─────────────────────────┤
│ Register                   │ RDMA Addr  │ PDP Addr   │ Value / Usage           │
├────────────────────────────┼────────────┼────────────┼─────────────────────────┤
│ S_STATUS (RO)              │ 0x2800     │ 0x2C00     │ [1:0]=G0, [17:16]=G1    │
│                            │            │            │ 0=IDLE, 1=RUN, 2=PEND   │
│                            │            │            │ Poll until idle         │
├────────────────────────────┼────────────┼────────────┼─────────────────────────┤
│ S_POINTER (set first)      │ 0x2801     │ 0x2C01     │ [0]: 0=Group0, 1=Group1 │
├────────────────────────────┼────────────┼────────────┼─────────────────────────┤
│ D_OP_ENABLE (set last)     │ 0x2802     │ 0x2C02     │ 0x1=START (RDMA first)  │
└────────────────────────────┴────────────┴────────────┴─────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 2. INPUT DIMENSIONS (Both RDMA & PDP) - [12:0] = actual_value - 1           │
├────────────────────────────────┬────────────┬────────────┬────────────────────┤
│ Register                       │ RDMA       │ PDP        │ Range (0~8191)     │
├────────────────────────────────┼────────────┼────────────┼────────────────────┤
│ D_DATA_CUBE_IN_WIDTH           │ 0x2803     │ 0x2C03     │ Width-1 (1~8192)   │
│ D_DATA_CUBE_IN_HEIGHT          │ 0x2804     │ 0x2C04     │ Height-1 (1~8192)  │
│ D_DATA_CUBE_IN_CHANNEL         │ 0x2805     │ 0x2C05     │ Channels-1 (1~8192)│
└────────────────────────────────┴────────────┴────────────┴────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 3. OUTPUT DIMENSIONS (PDP Only) - [12:0] = actual_value - 1                 │
├────────────────────────────────┬─────────────────────────┬────────────────────┤
│ Register                       │ PDP Addr                │ Range              │
├────────────────────────────────┼─────────────────────────┼────────────────────┤
│ D_DATA_CUBE_OUT_WIDTH          │ 0x2C06                  │ Width-1 (0~8191)   │
│ D_DATA_CUBE_OUT_HEIGHT         │ 0x2C07                  │ Height-1 (0~8191)  │
│ D_DATA_CUBE_OUT_CHANNEL        │ 0x2C08                  │ Channels-1 (0~8191)│
└────────────────────────────────┴─────────────────────────┴────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 4. DATA FORMAT & OPERATION MODE                                             │
├────────────────────────────────┬──────────┬──────────┬──────────────────────┤
│ D_DATA_FORMAT [1:0]            │ 0x280C   │ 0x2C21   │ 0=INT8, 1=INT16,     │
│                                │          │          │ 2=FP16               │
├────────────────────────────────┼──────────┼──────────┼──────────────────────┤
│ D_FLYING_MODE [0] / [4]        │ 0x2806   │ 0x2C09   │ 0=ON (from SDP)      │
│                                │          │ [4]      │ 1=OFF (from memory)  │
├────────────────────────────────┴──────────┴──────────┴──────────────────────┤
│ D_OPERATION_MODE_CFG (0x2C09) - PDP Only                                    │
│   [1:0]=Method: 0=AVG, 1=MAX, 2=MIN  |  [4]=Flying  |  [15:8]=Splits-1     │
│   Examples: 0x00=AVG+ON, 0x01=MAX+ON, 0x10=AVG+OFF, 0x110=AVG+OFF+2splits  │
├────────────────────────────────┬──────────┬──────────┬──────────────────────┤
│ D_OPERATION_MODE_CFG [7:0]     │ 0x280D   │ -        │ Splits-1 (0~255)     │
└────────────────────────────────┴──────────┴──────────┴──────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 5. POOLING KERNEL                                                            │
├────────────────────────────────┬──────────┬──────────┬──────────────────────┤
│ D_POOLING_KERNEL_CFG           │ 0x280E   │ 0x2C0D   │ Kernel & Stride      │
│   [3:0]=Width-1, [19:16]=Height-1 (0~7 for 1x1~8x8)                         │
│   [7:4]=StrideW-1, [23:20]=StrideH-1 (PDP only, 0~15 for stride 1~16)      │
│   Common: 0x00=1x1, 0x11=2x2, 0x12=3x3, 0x110202=3x3 k+3x3 s               │
├────────────────────────────────┴──────────┴──────────┴──────────────────────┤
│ D_RECIP_KERNEL_WIDTH/HEIGHT (PDP: 0x2C0E/0x2C0F) - For AVG pooling [16:0]  │
│   INT: val*2^16  |  1x1:0x10000, 2x2:0x4000, 3x3:0x5555, 4x4:0x1000        │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 6. PADDING                                                                   │
├────────────────────────────────┬──────────┬──────────┬──────────────────────┤
│ D_POOLING_PADDING_CFG          │ 0x280F   │ 0x2C10   │ RDMA:[2:0]=width     │
│   PDP: [2:0]=L, [5:3]=R, [8:6]=T, [11:9]=B  (0~7 each)                     │
│   PDP Examples: 0x249=pad 1 all, 0x492=pad 2 all                            │
├────────────────────────────────┴──────────┴──────────┴──────────────────────┤
│ D_POOLING_PADDING_VALUE_1~7_CFG (PDP: 0x2C11~0x2C17) [18:0] signed         │
│   INT8:[7:0], INT16:[15:0], FP16:FP17  |  AVG mode only  |  Typically 0x0  │
└──────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 7. SOURCE MEMORY (Both RDMA & PDP)                                          │
├────────────────────────────────┬──────────┬──────────┬──────────────────────┤
│ D_SRC_BASE_ADDR_LOW [31:0]     │ 0x2807   │ 0x2C18   │ Source address low   │
│ D_SRC_BASE_ADDR_HIGH [31:0]    │ 0x2808   │ 0x2C19   │ Source address high  │
│ D_SRC_LINE_STRIDE [31:0]       │ 0x2809   │ 0x2C1A   │ Bytes between lines  │
│ D_SRC_SURFACE_STRIDE [31:0]    │ 0x280A   │ 0x2C1B   │ Bytes between planes │
│ D_SRC_RAM_CFG [0]              │ 0x280B   │ -        │ 0=CV, 1=MC           │
└────────────────────────────────┴──────────┴──────────┴──────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 8. DESTINATION MEMORY (PDP Only)                                            │
├────────────────────────────────┬─────────────────────┬──────────────────────┤
│ D_DST_BASE_ADDR_LOW [31:0]     │ 0x2C1C              │ Dest address low     │
│ D_DST_BASE_ADDR_HIGH [31:0]    │ 0x2C1D              │ Dest address high    │
│ D_DST_LINE_STRIDE [31:0]       │ 0x2C1E              │ Bytes between lines  │
│ D_DST_SURFACE_STRIDE [31:0]    │ 0x2C1F              │ Bytes between planes │
│ D_DST_RAM_CFG [0]              │ 0x2C20              │ 0=CV, 1=MC           │
└────────────────────────────────┴─────────────────────┴──────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 9. SPLIT MODE (when split_num > 0)                                          │
├────────────────────────────────┬──────────┬──────────┬──────────────────────┤
│ D_PARTIAL_WIDTH_IN             │ 0x2810   │ 0x2C0B   │ [9:0]=FIRST-1        │
│   [19:10]=LAST-1, [29:20]=MID-1           │   FIRST+LAST+MID = total width   │
├────────────────────────────────┼──────────┼──────────┼──────────────────────┤
│ D_PARTIAL_WIDTH_OUT            │ -        │ 0x2C0C   │ Same format as above │
└────────────────────────────────┴──────────┴──────────┴──────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────┐
│ 10. DEBUG & PERFORMANCE                                                      │
├────────────────────────────────┬──────────┬──────────┬──────────────────────┤
│ D_NAN_FLUSH_TO_ZERO [0]        │ -        │ 0x2C0A   │ 0=Keep, 1=Flush (FP)│
│ D_INF_INPUT_NUM (RO)           │ -        │ 0x2C22   │ Count INF elements  │
│ D_NAN_INPUT_NUM (RO)           │ -        │ 0x2C23   │ Count NaN input     │
│ D_NAN_OUTPUT_NUM (RO)          │ -        │ 0x2C24   │ Count NaN output    │
├────────────────────────────────┼──────────┼──────────┼──────────────────────┤
│ D_PERF_ENABLE [0]              │ 0x2811   │ 0x2C25   │ 0=Off, 1=Enable     │
│ D_PERF_READ_STALL (RO)         │ 0x2812   │ -        │ Read stall cycles   │
│ D_PERF_WRITE_STALL (RO)        │ -        │ 0x2C26   │ Write stall cycles  │
├────────────────────────────────┼──────────┼──────────┼──────────────────────┤
│ D_CYA [31:0]                   │ 0x2813   │ 0x2C27   │ Debug/vendor reg    │
└────────────────────────────────┴──────────┴──────────┴──────────────────────┘

═══════════════════════════════════════════════════════════════════════════════
                     TYPICAL CONFIGURATION SEQUENCE
═══════════════════════════════════════════════════════════════════════════════

1. Poll status: while(read(0x2800)&0x3) {}, while(read(0x2C00)&0x3) {}
2. Set group: write(0x2801,0x0), write(0x2C01,0x0)
3. RDMA: Dims→Format→Flying→SrcMem→SplitMode→Kernel→Padding→PartialWidth
4. PDP: InDims→OutDims→Format→OpMode→Kernel→Recip→Padding→PadVals→SrcMem→
        DstMem→NaN→PartialWidth
5. Enable: write(0x2802,0x1), write(0x2C02,0x1)  [RDMA first!]
6. Monitor: Poll status or wait interrupt

═══════════════════════════════════════════════════════════════════════════════
                    QUICK VALUE REFERENCE TABLE
═══════════════════════════════════════════════════════════════════════════════

STATUS:      0=IDLE, 1=RUNNING, 2=PENDING
FORMAT:      0=INT8, 1=INT16, 2=FP16
FLYING:      0=ON(from SDP), 1=OFF(from memory)
POOLING:     0=AVG, 1=MAX, 2=MIN
RAM_TYPE:    0=CV(on-chip), 1=MC(external)
KERNEL:      0~7 = 1x1~8x8 (width-1)
STRIDE:      0~15 = 1~16 (stride-1)
PADDING:     0~7 per side
RECIP(AVG):  1x1:0x10000, 2x2:0x4000, 3x3:0x5555, 4x4:0x1000

═══════════════════════════════════════════════════════════════════════════════
                              END OF GUIDE
═══════════════════════════════════════════════════════════════════════════════
